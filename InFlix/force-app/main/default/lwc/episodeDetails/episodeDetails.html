<template>
    <template lwc:if={selectedEpisode}>
        <div class="details-container">
            <lightning-card title="Episode Details"></lightning-card>
            <img class="logo" src={selectedEpisode.TV_series__r.Logo__c}></img>
            <div class="detail-item">Title: {combinedTitle}</div>
            <div class="detail-item">Length(min): {selectedEpisode.Length_min__c}</div>
            <div class="detail-item">TV Series trailer:
                <a href={selectedEpisode.TV_series__r.Trailer__c} target="_blank">Trailer link</a>
            </div>
            <div class="detail-item">Description: {selectedEpisode.Description__c}</div>
            <lightning-record-edit-form record-id={selectedEpisode.Id} object-api-name="Episode__c"
                onsuccess={handleSuccess} onerror={handleError}>
                <lightning-input-field field-name="Watched__c" onchange={saveWatched}></lightning-input-field>
            </lightning-record-edit-form>
            <div class="space"></div>
            <template if:true={showSuccessMessage}>
                <div class="success">Your choice was saved!</div>
            </template>
            <template if:true={showErrorMessage}>
                <div class="error">Something went wrong, try again later.</div>
            </template>
            <lightning-button class="episodes-button" variant="brand" label="Back to Episodes"
                onclick={handleBackToEpisodes}></lightning-button>
        </div>
    </template>
    <template lwc:else>
        <div>Select an episode</div>
    </template>
</template>