<template>
    <template lwc:if={selectedMovie}>
        <div class="details-container">
            <lightning-card title="Movie Details"></lightning-card>
            <img class="logo" src={selectedMovie.Poster__c}></img>
            <div class="detail-item">Title: {selectedMovie.Name}</div>
            <div class="detail-item">Length(min): {selectedMovie.Length_min__c}</div>
            <div class="detail-item">Genres: {selectedMovie.Genres__c}</div>
            <div class="detail-item">TV Series trailer:
                <a href={selectedMovie.Trailer__c} target="_blank">Trailer link</a>
            </div>
            <div class="detail-item">Description: {selectedMovie.Description__c}</div>
            <lightning-record-edit-form record-id={selectedMovie.Id} object-api-name="Movie__c"
                onsuccess={handleSuccess} onerror={handleError}>
                <lightning-input-field field-name="To_watch__c" onchange={saveToWatch}></lightning-input-field>
            </lightning-record-edit-form>
            <lightning-record-edit-form record-id={selectedMovie.Id} object-api-name="Movie__c"
                onsuccess={handleSuccess} onerror={handleError}>
                <lightning-input-field field-name="Favorite__c" onchange={saveFavorite}></lightning-input-field>
            </lightning-record-edit-form>
            <div class="space"></div>
            <template if:true={showSuccessMessage}>
                <div class="success">Your choice was saved!</div>
            </template>
            <template if:true={showErrorMessage}>
                <div class="error">Something went wrong, try again later.</div>
            </template>
            <lightning-button class="movies-button" variant="brand" label="Back to Movies"
                onclick={handleBackToMovies}></lightning-button>
        </div>
    </template>
    <template lwc:else>
        <div>Select a movie</div>
    </template>
</template>